<!DOCTYPE html>
<html lang="en">
{% include 'partials/head.html' %}
<body>
    {% include 'partials/header.html' %}
    <section id="checkout">
        <h2>Checkout</h2>
        <a class="back" href="/cart">
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="21" viewBox="0 0 12 21" fill="none">
                <path d="M10.1911 1.74921e-06L12 1.86375L3.61783 10.5L12 19.1362L10.1911 21L-9.8941e-07 10.5L10.1911 1.74921e-06Z"
                    fill="#E352BA" />
            </svg>
            Back
        </a>
        <div class="toggle" onclick="toggleForm('shipping')">
            <svg id="toggle-shipping" xmlns="http://www.w3.org/2000/svg" width="33" height="20" viewBox="0 0 33 20" fill="none">
                <path
                    d="M-1.31784e-07 3.01486L2.92875 -1.31446e-06L16.5 13.9703L30.0712 -1.2802e-07L33 3.01486L16.5 20L-1.31784e-07 3.01486Z"
                    fill="#111111"></path>
            </svg>
            <h4>1. Shipping</h4>
        </div>
        <div id="form-shipping" class="shipping">
            <div class="inputs">
                <input type="text" id="input-first-name" placeholder="First name">
                <input type="text" id="input-middle-name" placeholder="Middle name">
                <input type="text" id="input-last-name" placeholder="Last name">
                <div class="select">
                    <select onchange="selectCountry()" name="country" id="input-country">
                        <option value="" disabled selected>Select country</option>
                        {% for country in delivery_countries %}
                            <option value="{{ country }}">{{ country }}</option>
                        {% endfor %}
                    </select>
                    <svg class="down-arrow" xmlns="http://www.w3.org/2000/svg" width="23" height="15" viewBox="0 0 23 15" fill="none">
                        <path
                            d="M-9.22487e-08 2.13579L2.04125 0.0253897L11.5 9.80458L20.9587 0.0253905L23 2.13579L11.5 14.0254L-9.22487e-08 2.13579Z"
                            fill="#F1F1F1" />
                    </svg>
                </div>
                <div class="select">
                    <select onchange="selectCity()" name="city" id="input-city">
                        <option value="" disabled selected>Select city</option>
                    </select>
                    <svg class="down-arrow" xmlns="http://www.w3.org/2000/svg" width="23" height="15" viewBox="0 0 23 15" fill="none">
                        <path
                            d="M-9.22487e-08 2.13579L2.04125 0.0253897L11.5 9.80458L20.9587 0.0253905L23 2.13579L11.5 14.0254L-9.22487e-08 2.13579Z"
                            fill="#F1F1F1" />
                    </svg>
                </div>
                <div class="select">
                    <select onchange="selectDeliveryMethod()" name="delivery-method" id="input-delivery-method">
                        <option value="pick-up-from-post-office" selected>Pick up from Post Office</option>
                        <option value="address-delivery">Address Delivery</option>
                    </select>
                    <svg class="down-arrow" xmlns="http://www.w3.org/2000/svg" width="23" height="15" viewBox="0 0 23 15" fill="none">
                        <path
                            d="M-9.22487e-08 2.13579L2.04125 0.0253897L11.5 9.80458L20.9587 0.0253905L23 2.13579L11.5 14.0254L-9.22487e-08 2.13579Z"
                            fill="#F1F1F1" />
                    </svg>
                </div>
                <div class="select" id="wrapper-input-post-office-branch">
                    <select name="post-office-branch" id="input-post-office-branch">
                        <option value="" disabled selected>Select post office branch</option>
                    </select>
                    <svg class="down-arrow" xmlns="http://www.w3.org/2000/svg" width="23" height="15" viewBox="0 0 23 15" fill="none">
                        <path
                            d="M-9.22487e-08 2.13579L2.04125 0.0253897L11.5 9.80458L20.9587 0.0253905L23 2.13579L11.5 14.0254L-9.22487e-08 2.13579Z"
                            fill="#F1F1F1" />
                    </svg>
                </div>
                <input class="disabled" type="text" id="input-address" placeholder="Street Address">
                <input class="disabled" type="text" id="input-address-2" placeholder="Apartment, Building, Floor, etc. (Optional)">
                <input class="disabled" type="text" name="postal-code" id="input-postal-code" placeholder="ZIP/Postal Code">
                <div class="checkbox">
                    <div class="box" onclick="checkSaveShippingData()">
                        <svg id="input-check-shipping" xmlns="http://www.w3.org/2000/svg" width="33" height="24" viewBox="0 0 33 24" fill="none">
                            <path d="M11.5399 24L0 12.6237L2.88497 9.77963L11.5399 18.3118L30.115 0L33 2.84407L11.5399 24Z" fill="#F1F1F1" />
                        </svg>
                    </div>
                    <p>Save this data for fast checkout</p>
                </div>
            </div>
            <p class="side">If you need your order to be shipped within Ukraine, it is possible to choose between Pick Up from Post Office or
            Address Delivery, in European countries only Pick Up from Post Office option is available.
            Address Delivery costs more than Pick Up from Post Office.</p>
        </div>

        <div class="toggle" onclick="toggleForm('payment')">
            <svg id="toggle-payment" xmlns="http://www.w3.org/2000/svg" width="33" height="20" viewBox="0 0 33 20" fill="none">
                <path
                    d="M-1.31784e-07 3.01486L2.92875 -1.31446e-06L16.5 13.9703L30.0712 -1.2802e-07L33 3.01486L16.5 20L-1.31784e-07 3.01486Z"
                    fill="#111111"></path>
            </svg>
            <h4>2. Payment</h4>
        </div>
        <div id="form-payment" class="payment">
            <div class="inputs">
                <div class="select">
                    <select name="payment-method" id="input-payment-method">
                        <option value="" selected disabled>Payment method</option>
                        <option value="full-prepayment">Full Prepayment</option>
                        <option value="post-payment">Post Payment</option>
                    </select>
                    <svg class="down-arrow" xmlns="http://www.w3.org/2000/svg" width="23" height="15" viewBox="0 0 23 15" fill="none">
                        <path
                            d="M-9.22487e-08 2.13579L2.04125 0.0253897L11.5 9.80458L20.9587 0.0253905L23 2.13579L11.5 14.0254L-9.22487e-08 2.13579Z"
                            fill="#F1F1F1" />
                    </svg>
                </div>
                <!-- <input type="text" id="input-card-number" placeholder="Card Number"> -->
                <!-- <input type="text" id="input-expiration-date" placeholder="Expiration Date"> -->
                <!-- <input type="text" id="input-cvv" placeholder="CVV"> -->
                <input type="text" id="input-promo-code" placeholder="Promo Code (Optional)">
                <div class="checkbox">
                    <div class="box" onclick="checkSavePaymentData()">
                        <svg id="input-check-payment" xmlns="http://www.w3.org/2000/svg" width="33" height="24" viewBox="0 0 33 24" fill="none">
                            <path d="M11.5399 24L0 12.6237L2.88497 9.77963L11.5399 18.3118L30.115 0L33 2.84407L11.5399 24Z"
                                fill="#F1F1F1" />
                        </svg>
                    </div>
                    <p>Save this data for fast checkout</p>
                </div>
            </div>
            <p class="side">There are two payment options: <br>
            1st is full prepayment - you pay full sum and afterwards receive the product. <br>
            2nd is post payment - before receiving the product you only pay for delivery and upon receiving it you pay the rest. <br>
            You will not be charged immediately. First, the money on your credit card will be frozen. If an order is confirmed, you will be charged. If an order is not confirmed, the money will be unfrozen.</p>
        </div>

        <!-- contact info -->
        <div class="toggle" onclick="toggleForm('contact')">
            <svg id="toggle-contact" xmlns="http://www.w3.org/2000/svg" width="33" height="20" viewBox="0 0 33 20" fill="none">
                <path
                    d="M-1.31784e-07 3.01486L2.92875 -1.31446e-06L16.5 13.9703L30.0712 -1.2802e-07L33 3.01486L16.5 20L-1.31784e-07 3.01486Z"
                    fill="#111111"></path>
            </svg>
            <h4>3. Contact information</h4>
        </div>
        <div id="form-contact" class="contact">
            <div class="inputs">
                <div class="select">
                    <select onchange="selectMessenger()" name="messenger" id="input-contact-messenger">
                        <option value="telegram" selected>Telegram</option>
                        <option value="instagram">Instagram</option>
                        <option value="viber">Viber</option>
                    </select>
                    <svg class="down-arrow" xmlns="http://www.w3.org/2000/svg" width="23" height="15" viewBox="0 0 23 15" fill="none">
                        <path
                            d="M-9.22487e-08 2.13579L2.04125 0.0253897L11.5 9.80458L20.9587 0.0253905L23 2.13579L11.5 14.0254L-9.22487e-08 2.13579Z"
                            fill="#F1F1F1" />
                    </svg>
                </div>
                <input oninput="phoneInput()" type="text" id="input-phone-number" placeholder="Phone number" value="{{ user_data['phone-number'] }}">
                <input class="disabled" type="text" id="input-username" placeholder="Your @username">

                <div class="checkbox">
                    <div class="box" onclick="checkSaveContactData()">
                        <svg id="input-check-contact" xmlns="http://www.w3.org/2000/svg" width="33" height="24" viewBox="0 0 33 24" fill="none">
                            <path d="M11.5399 24L0 12.6237L2.88497 9.77963L11.5399 18.3118L30.115 0L33 2.84407L11.5399 24Z"
                                fill="#F1F1F1" />
                        </svg>
                    </div>
                    <p>Save this data for fast checkout</p>
                </div>
            </div>
            <p class="side">As soon as your order will be processed, we will contact you in the messenger of your choice informing you about the status of the order as well as giving you an option to pay.</p>
        </div>

        <!-- final order review -->
         <div class="toggle" onclick="toggleForm('review')">
            <svg id="toggle-review" xmlns="http://www.w3.org/2000/svg" width="33" height="20" viewBox="0 0 33 20" fill="none">
                <path
                    d="M-1.31784e-07 3.01486L2.92875 -1.31446e-06L16.5 13.9703L30.0712 -1.2802e-07L33 3.01486L16.5 20L-1.31784e-07 3.01486Z"
                    fill="#111111"></path>
            </svg>
            <h4>4. Final order review</h4>
         </div>
         <div id="form-review" class="review">
            <div class="cart-items">
                {% for item in cart_items %}
                {% set sorted_sizes = item.info.sizes | sort %}
                <div class="card">
                    <div class="img">
                        <img src="{{ item.info.img }}" alt="">
                    </div>
                    <div class="data">
                        <div class="row">
                            <div class="col start" id="card-{{ item.id }}">
                                <h4>{{ item.info.category }} {{ item.info.brand }}</h4>
                            </div>
                            <div class="col">
                                <p>Product number: {{ item.id }}</p>
                                <p class="info-size">Size: {{ item.size }}</p>
                            </div>
                            <div class="col end">
                                <p>Price: {{ item.info.price }} uah</p>
                                <p class="info-quantity">Quantity: {{ item.quantity }}</p>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="orderinfo">
                <h4>Subtotal: {{ subtotal }}</h4>
                <h4>Discount: <span id="discount">0</span> uah</h4>
                <h4>Delivery: <span id="delivery">0</span> uah</h4>
                <h4>Total: <span id="total">{{ subtotal }}</span> uah</h4>
            </div>
         </div>

        <button id="button-checkout" onclick="checkout()">Place order</button>
    </section>
    <section id="featured" class="product">
        {% if cart_items %}
        <h2>You might also like</h2>
        {% else %}
        <h2>Featured products</h2>
        {% endif %}
        <div class="products">
            {% for product in products_featured %}
            {% include 'partials/card.html' %}
            {% endfor %}
        </div>
    </section>
    {% include 'partials/newsletter.html' %}
    {% include 'partials/footer.html' %}
    <script src="{{ url_for('static', filename='js/shop.js') }}"></script>
    <script src="{{ url_for('static', filename='js/forms.js') }}"></script>
    <script>
        const deliveryCountries = {{ delivery_countries | tojson }};
        const deliveryCities = {{ delivery_cities | tojson }};
        const postOfficeBranches = {{ post_office_branches | tojson }};
    </script>
</body>
</html>